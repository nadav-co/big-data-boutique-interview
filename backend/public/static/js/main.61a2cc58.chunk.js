(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{145:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(22),c=n.n(a),s=n(10),o=n(1),i=n(31),u=n(8);function l(){return Object(r.jsxs)("header",{className:"flex align-center space-bt",children:[Object(r.jsx)("div",{className:"logo"}),Object(r.jsxs)("ul",{className:"flex",children:[Object(r.jsx)("li",{children:Object(r.jsx)(i.b,{to:"/room",children:"Rooms"})}),Object(r.jsx)("li",{children:Object(r.jsx)(i.b,{to:"/manager",children:"Managers"})})]})]})}var p=n(6),j=n(13),d=n(5),b=n.n(d),f=n(9),g=n(66),h="/api/",m=n.n(g).a.create({withCredentials:!0}),O=function(e,t){return w(e,"GET",t)},v=function(e,t){return w(e,"POST",t)},x=function(e,t){return w(e,"PUT",t)};function w(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(b.a.mark((function e(t){var n,r,a,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",r=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,m({url:"".concat(h).concat(t),method:n,data:r});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var y={query:function(){return M.apply(this,arguments)},addManager:function(e){return N.apply(this,arguments)},updateManager:function(e){return E.apply(this,arguments)}};function M(){return(M=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("manager");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("manager/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(){return(N=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("manager",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(e){var t=e.manager,n=(e.saveManager,t.fullname),a=Object(o.useState)(n),c=Object(j.a)(a,2),i=c[0],u=c[1],l=Object(s.b)();return Object(r.jsx)("section",{className:"manager-edit",children:Object(r.jsxs)("form",{onSubmit:function(e){var n,r;e.preventDefault(),l(t._id?(r=Object(p.a)(Object(p.a)({},t),{},{fullname:i}),function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.updateManager(r);case 3:return n=e.sent,t({type:"UPDATE_MANAGER",manager:n}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()):(n=Object(p.a)(Object(p.a)({},t),{},{fullname:i}),function(){var e=Object(f.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.addManager(n);case 3:return r=e.sent,t({type:"ADD_MANAGER",manager:r}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(r.jsx)("input",{type:"text",value:i,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Add Manager"}),i!==n&&Object(r.jsxs)("div",{className:"buttons flex",children:[Object(r.jsx)("button",{className:"cancel nice-btn",type:"button",onClick:function(){return u(n)},children:"cancel"}),Object(r.jsx)("button",{className:"nice-btn",children:"Save"})]})]})})}var S={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};function _(){var e=Object(s.c)((function(e){return e.managerModule})).managers;return Object(r.jsxs)("main",{className:"manager-page",children:[Object(r.jsx)("h1",{children:"managers"}),Object(r.jsxs)("section",{className:"managers-container flex col center",children:[e.map((function(e){return Object(r.jsx)(T,{manager:e},S.makeId())})),Object(r.jsx)(T,{manager:{fullname:""}},S.makeId())]})]})}var I=n(32),k=n(34),A=n.n(k),C=(n(101),{query:function(e){return B.apply(this,arguments)},getMeetingById:function(e){return G.apply(this,arguments)},getEmptyMeeting:function(){return{startDate:new Date,endDate:null,createdBy:"",desc:"",occupationHours:[]}},updateMeeting:function(e){return L.apply(this,arguments)},addMeeting:function(e){return P.apply(this,arguments)},getOccupations:function(e){return H.apply(this,arguments)}});function B(){return(B=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function G(){return(G=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(){return(L=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("meeting/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function P(){return(P=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("meeting",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function H(){return(H=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/occupation/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function R(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.query(e);case 3:return r=t.sent,n({type:"SET_MEETINGS",meetings:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("err in getMeetings",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function U(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getOccupations(e);case 3:return r=t.sent,n({type:"SET_OCCUPATIONS",occupations:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("err in getMeetingById",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function F(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.meetingModule})),n=t.meetingToEdit,a=t.occupationsByDate,c=Object(s.c)((function(e){return e.managerModule})).managers,i=Object(o.useState)(null),u=Object(j.a)(i,2),l=u[0],d=u[1],g=Object(o.useState)([]),h=Object(j.a)(g,2),m=h[0],O=h[1],v=Object(o.useState)(""),x=Object(j.a)(v,2),w=x[0],D=x[1];Object(o.useEffect)((function(){y()}),[c]),Object(o.useEffect)((function(){if(n){var e=new Date(n.startDate),t=n.endDate?new Date(n.endDate):null;if(d(Object(p.a)(Object(p.a)({},n),{},{startDate:e,endDate:t})),n._id){var r=new Array(t.getHours()-e.getHours()).fill("").map((function(t,n){return e.getHours()+n}));O(r)}else O([])}}),[n]);var y=function(){var t=Object(p.a)(Object(p.a)({},C.getEmptyMeeting()),{},{createdBy:c[0]});e({type:"SET_MEETING_TO_EDIT",meetingToEdit:Object(p.a)({},t)})},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e<9||e>18-t)},E=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!m.includes(t-r)||!(null===(n=a["".concat(e.getMonth(),"-").concat(e.getDate())])||void 0===n?void 0:n.includes(t-r))},N=function(e){var t=e.target,n=t.name,r=t.value;"select-one"===t.type&&(r=JSON.parse(r)),d(Object(p.a)(Object(p.a)({},l),{},Object(I.a)({},n,r)))},T=function(t,n){var r=new Date(t.toLocaleString());r.getMonth()!==+a.month&&e(U(r.toLocaleDateString())),d(Object(p.a)(Object(p.a)({},l),{},Object(I.a)({},n,r)))},_=function(e){D(e),setTimeout(D,3e3,"")};return(null===l||void 0===l?void 0:l.startDate)&&c?Object(r.jsxs)("section",{className:"meeting-edit",children:[Object(r.jsx)("h3",{children:w}),Object(r.jsxs)("form",{className:"flex col",onSubmit:function(t){t.preventDefault();var n,r=l.startDate,a=l.endDate;if(r&&a&&!r.getMilliseconds())try{e((n=Object(p.a)({},l),function(){var e=Object(f.a)(b.a.mark((function e(t){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n._id){e.next=8;break}return e.next=4,C.updateMeeting(n);case 4:r=e.sent,t({type:"UPDATE_MEETING",meeting:r}),e.next=12;break;case 8:return e.next=10,C.addMeeting(n);case 10:r=e.sent,t({type:"ADD_MEETING",meeting:r});case 12:return e.next=14,C.getOccupations(new Date(r.startDate).toLocaleDateString());case 14:return a=e.sent,t({type:"SET_OCCUPATIONS",occupations:a}),e.abrupt("return",r);case 19:throw e.prev=19,e.t0=e.catch(0),console.log("err in updateMeeting",e.t0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}())),y()}catch(c){_("Can not save. Please try again")}else _("Please choose start and end dates.")},children:[Object(r.jsxs)("label",{children:["Manager:",Object(r.jsx)("br",{}),Object(r.jsx)("select",{name:"createdBy",onInput:N,value:JSON.stringify(l.createdBy),children:c.map((function(e){return Object(r.jsx)("option",{value:JSON.stringify(e),children:e.fullname},S.makeId())}))})]}),Object(r.jsxs)("label",{children:["Start:",Object(r.jsx)("br",{}),Object(r.jsx)(A.a,{selected:new Date(l.startDate),peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,showTimeSelect:!0,timeIntervals:60,filterTime:function(e){var t=e.getHours(),n=new Date;return!(n.toLocaleDateString()===e.toLocaleDateString()&&t<n.getHours())&&(M(t,1)&&E(e,t))},dateFormat:"MMMM d, yyyy h aa",scrollableYearDropdown:!0,onChange:function(e){return T(e,"startDate")}})]}),Object(r.jsxs)("label",{children:["End:",Object(r.jsx)("br",{}),Object(r.jsx)(A.a,{selected:new Date(l.endDate||l.startDate),includeDates:[new Date(l.startDate)],showTimeSelect:!0,timeIntervals:60,filterTime:function(e){var t=e.getHours();return!(t<=l.startDate.getHours())&&(M(t)&&E(e,t,1))},dateFormat:"h aa",dropdownMode:"select",onChange:function(e){return T(e,"endDate")}})]}),Object(r.jsxs)("label",{children:["Description:",Object(r.jsx)("br",{}),Object(r.jsx)("textarea",{name:"desc",onChange:N,value:l.desc,placeholder:"Enter Meeting Description"})]}),Object(r.jsxs)("div",{className:"buttons flex space-bt",children:[Object(r.jsx)("button",{type:"button",className:"cancel nice-btn ".concat(l._id?"":"hidden"),onClick:y,children:"Cancel"}),Object(r.jsx)("button",{className:"nice-btn",type:"submit",children:"Save Meeting"})]})]})]}):Object(r.jsx)("h1",{children:"Loading"})}function J(e){var t=e.meeting,n=new Date(t.startDate).toLocaleString().split(", "),a=Object(j.a)(n,2),c=a[0],s=a[1].split(".")[0],o=new Date(t.endDate).toLocaleString().split(", ")[1];return Object(r.jsxs)("div",{className:"meeting-preview flex align-center",children:[Object(r.jsx)("span",{className:"name",children:t.createdBy.fullname}),Object(r.jsx)("span",{className:"date",children:c}),Object(r.jsxs)("span",{className:"time",children:[s," - ",o]}),Object(r.jsx)("p",{className:"desc",children:t.desc||"(No description)"})]})}function q(){var e=Object(s.c)((function(e){return e.meetingModule})).meetings,t=Object(o.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(null),u=Object(j.a)(i,2),l=u[0],p=u[1],d=Object(s.b)();Object(o.useEffect)((function(){p(new Date)}),[]),Object(o.useEffect)((function(){var e=(new Date).toLocaleString().split(",")[0];d(R(e))}),[d]),Object(o.useEffect)((function(){l&&h()}),[l,e]);var g=function(e){if(l.getMonth()!==e.getMonth()){var t=e.toLocaleString().split(",")[0];d(R(t))}p(e)},h=function(){var t=null===e||void 0===e?void 0:e.filter((function(e){return new Date(e.startDate).getDate()===l.getDate()}));c(t.sort((function(e,t){return new Date(e.startDate).getHours()-new Date(t.startDate).getHours()})))};return Object(r.jsxs)("main",{className:"meeting-list flex col",children:[Object(r.jsx)("h1",{children:"meetings"}),Object(r.jsx)(A.a,{selected:l,peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,yearDropdownItemNumber:20,timeIntervals:60,dateFormat:"MMMM d, yyyy",scrollableYearDropdown:!0,dropdownMode:"select",onChange:function(e){return g(e)}}),Object(r.jsxs)("div",{className:"title flex align-center",children:[Object(r.jsx)("h3",{className:"name",children:"Manager"}),Object(r.jsx)("h3",{className:"date",children:"Date"}),Object(r.jsx)("h3",{className:"time",children:"Time"}),Object(r.jsx)("h3",{className:"desc",children:"Description"})]}),(null===a||void 0===a?void 0:a.length)?Object(r.jsx)("section",{className:"meetings-container",children:a.map((function(e){return Object(r.jsx)("div",{onClick:function(){return d((t=e._id,function(){var e=Object(f.a)(b.a.mark((function e(n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getMeetingById(t);case 3:return r=e.sent,n({type:"SET_MEETING_TO_EDIT",meetingToEdit:r}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getMeetingById",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var t},children:Object(r.jsx)(J,{meeting:e})},S.makeId())}))}):Object(r.jsxs)("h2",{children:["(No Meetings On ",null===l||void 0===l?void 0:l.toDateString(),")"]})]})}function Y(){var e=Object(s.c)((function(e){return e.meetingModule})).occupationsByDate,t=Object(o.useState)(!1),n=Object(j.a)(t,2),a=n[0],c=n[1];Object(o.useEffect)((function(){var e,t=(new Date).getHours(),n=setInterval((function(){(new Date).getHours()!==t&&(e=setInterval(i,36e5),clearInterval(n))}),6e4);return function(){clearInterval(n),clearInterval(e)}}),[]),Object(o.useEffect)((function(){i()}),[e]);var i=function(){var t,n=new Date,r="".concat(n.getMonth(),"-").concat(n.getDate());(null===(t=e[r])||void 0===t?void 0:t.includes(n.getHours()))?c(!0):a&&c(!1)};return Object(r.jsxs)("section",{className:"room-details",children:[Object(r.jsxs)("h1",{className:"room-occupation",children:["Room 1 is ",a?"currently occupied \ud83d\udd34":"available \ud83d\udfe2"]}),Object(r.jsx)(q,{}),Object(r.jsx)(F,{})]})}function W(){var e=Object(s.b)();return Object(o.useEffect)((function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.query();case 3:return n=e.sent,t({type:"SET_MANAGERS",managers:n}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e(U((new Date).toLocaleDateString()))}),[e]),Object(r.jsx)("div",{className:"app",children:Object(r.jsxs)(i.a,{children:[Object(r.jsx)(l,{}),Object(r.jsx)("main",{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/manager",component:_}),Object(r.jsx)(u.b,{path:"/room",component:Y}),Object(r.jsx)(u.a,{from:"/",to:"/room"})]})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(145);var X=n(21),V=n(69),z=n(42),K={managers:[]};var Q={meetings:[],meetingToEdit:null,occupationsByDate:{}};var Z=Object(X.c)({meetingModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_MEETING_TO_EDIT":return Object(p.a)(Object(p.a)({},e),{},{meetingToEdit:t.meetingToEdit});case"SET_MEETINGS":return Object(p.a)(Object(p.a)({},e),{},{meetings:t.meetings});case"ADD_MEETING":return Object(p.a)(Object(p.a)({},e),{},{meetings:[].concat(Object(z.a)(e.meetings),[t.meeting])});case"UPDATE_MEETING":var n=e.meetings.map((function(e){return e._id===t.meeting._id?t.meeting:e}));return Object(p.a)(Object(p.a)({},e),{},{meetings:n});case"SET_OCCUPATIONS":return Object(p.a)(Object(p.a)({},e),{},{occupationsByDate:t.occupations});default:return e}},managerModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_MANAGERS":return Object(p.a)(Object(p.a)({},e),{},{managers:t.managers});case"ADD_MANAGER":return Object(p.a)(Object(p.a)({},e),{},{managers:[].concat(Object(z.a)(e.managers),[t.manager])});case"UPDATE_MANAGER":var n=e.managers.map((function(e){return e._id===t.manager._id?t.manager:e}));return Object(p.a)(Object(p.a)({},e),{},{managers:n});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.d,ee=Object(X.e)(Z,$(Object(X.a)(V.a))),te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(r.jsx)(s.a,{store:ee,children:Object(r.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),te()}},[[147,1,2]]]);
//# sourceMappingURL=main.61a2cc58.chunk.js.map