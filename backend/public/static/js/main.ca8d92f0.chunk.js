(this.webpackJsonpe2e=this.webpackJsonpe2e||[]).push([[0],{145:function(e,t,n){},147:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(22),c=n.n(r),s=n(10),o=n(1),i=n(31),u=n(8);function l(){return Object(a.jsxs)("header",{className:"flex align-center space-bt",children:[Object(a.jsx)("div",{className:"logo"}),Object(a.jsxs)("ul",{className:"flex",children:[Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/room",children:"Rooms"})}),Object(a.jsx)("li",{children:Object(a.jsx)(i.b,{to:"/manager",children:"Managers"})})]})]})}var p=n(6),j=n(13),d=n(5),b=n.n(d),f=n(9),g=n(66),h="/api/",m=n.n(g).a.create({withCredentials:!0}),O=function(e,t){return w(e,"GET",t)},v=function(e,t){return w(e,"POST",t)},x=function(e,t){return w(e,"PUT",t)};function w(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(b.a.mark((function e(t){var n,a,r,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",a=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,m({url:"".concat(h).concat(t),method:n,data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var y={query:function(){return M.apply(this,arguments)},addManager:function(e){return N.apply(this,arguments)},updateManager:function(e){return E.apply(this,arguments)}};function M(){return(M=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("manager");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("manager/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(){return(N=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("manager",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(e){var t=e.manager,n=(e.saveManager,t.fullname),r=Object(o.useState)(n),c=Object(j.a)(r,2),i=c[0],u=c[1],l=Object(s.b)();return Object(a.jsx)("section",{className:"manager-edit",children:Object(a.jsxs)("form",{onSubmit:function(e){var n,a;e.preventDefault(),l(t._id?(a=Object(p.a)(Object(p.a)({},t),{},{fullname:i}),function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.updateManager(a);case 3:return n=e.sent,t({type:"UPDATE_MANAGER",manager:n}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()):(n=Object(p.a)(Object(p.a)({},t),{},{fullname:i}),function(){var e=Object(f.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.addManager(n);case 3:return a=e.sent,t({type:"ADD_MANAGER",manager:a}),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(a.jsx)("input",{type:"text",value:i,onChange:function(e){var t=e.target;return u(t.value)},placeholder:"Add Manager"}),i!==n&&Object(a.jsxs)("div",{className:"buttons flex",children:[Object(a.jsx)("button",{className:"cancel nice-btn",type:"button",onClick:function(){return u(n)},children:"cancel"}),Object(a.jsx)("button",{className:"nice-btn",children:"Save"})]})]})})}var S={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};function _(){var e=Object(s.c)((function(e){return e.managerModule})).managers;return Object(a.jsxs)("main",{className:"manager-page",children:[Object(a.jsx)("h1",{children:"managers"}),Object(a.jsxs)("section",{className:"managers-container flex col center",children:[e.map((function(e){return Object(a.jsx)(T,{manager:e},S.makeId())})),Object(a.jsx)(T,{manager:{fullname:""}},S.makeId())]})]})}var I=n(32),k=n(34),A=n.n(k),C=(n(101),{query:function(e){return G.apply(this,arguments)},getMeetingById:function(e){return B.apply(this,arguments)},getEmptyMeeting:function(){return{startDate:new Date,endDate:null,createdBy:"",desc:"",occupationHours:[]}},updateMeeting:function(e){return P.apply(this,arguments)},addMeeting:function(e){return H.apply(this,arguments)},getOccupations:function(e){return F.apply(this,arguments)}});function G(){return(G=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(){return(B=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function P(){return(P=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("meeting/".concat(t._id),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function H(){return(H=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v("meeting",t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function F(){return(F=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("meeting/occupation/".concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(e.getMonth(),"/").concat(e.getDate(),"/").concat(e.getFullYear()),t.next=4,C.query(a);case 4:return r=t.sent,n({type:"SET_MEETINGS",meetings:r}),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log("err in getMeetings",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}function R(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a="".concat(e.getMonth(),"/").concat(e.getDate(),"/").concat(e.getFullYear()),t.next=4,C.getOccupations(a);case 4:return r=t.sent,n({type:"SET_OCCUPATIONS",occupations:r}),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log("err in get occupations",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}function U(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.meetingModule})),n=t.meetingToEdit,r=t.occupationsByDate,c=Object(s.c)((function(e){return e.managerModule})).managers,i=Object(o.useState)(null),u=Object(j.a)(i,2),l=u[0],d=u[1],g=Object(o.useState)([]),h=Object(j.a)(g,2),m=h[0],O=h[1],v=Object(o.useState)(""),x=Object(j.a)(v,2),w=x[0],D=x[1],y=(new Date).getTimezoneOffset()/60;Object(o.useEffect)((function(){M()}),[c]),Object(o.useEffect)((function(){if(n){var e=new Date(n.startDate),t=n.endDate?new Date(n.endDate):null;if(d(Object(p.a)(Object(p.a)({},n),{},{startDate:e,endDate:t})),n._id){var a=new Array(t.getHours()-e.getHours()).fill("").map((function(t,n){return e.getHours()+n}));O(a)}else O([])}}),[n]);var M=function(){var t=Object(p.a)(Object(p.a)({},C.getEmptyMeeting()),{},{createdBy:c[0]});e({type:"SET_MEETING_TO_EDIT",meetingToEdit:Object(p.a)({},t)})},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!(e<9||e>18-t)},N=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!m.includes(t-a)||!(null===(n=r["".concat(e.getMonth(),"-").concat(e.getDate())])||void 0===n?void 0:n.includes(t-a+y))},T=function(e){var t=e.target,n=t.name,a=t.value;"select-one"===t.type&&(a=JSON.parse(a)),d(Object(p.a)(Object(p.a)({},l),{},Object(I.a)({},n,a)))},_=function(t,n){t.getMonth()!==+r.month&&e(R(t)),d(Object(p.a)(Object(p.a)({},l),{},Object(I.a)({},n,t)))},k=function(e){D(e),setTimeout(D,3e3,"")};return(null===l||void 0===l?void 0:l.startDate)&&c?Object(a.jsxs)("section",{className:"meeting-edit",children:[Object(a.jsx)("h3",{children:w}),Object(a.jsxs)("form",{className:"flex col",onSubmit:function(t){t.preventDefault();var n,a=l.startDate,r=l.endDate;if(a&&r&&!a.getMilliseconds())try{e((n=Object(p.a)({},l),function(){var e=Object(f.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n._id){e.next=8;break}return e.next=4,C.updateMeeting(n);case 4:a=e.sent,t({type:"UPDATE_MEETING",meeting:a}),e.next=12;break;case 8:return e.next=10,C.addMeeting(n);case 10:a=e.sent,t({type:"ADD_MEETING",meeting:a});case 12:return e.next=14,C.getOccupations(new Date(a.startDate).toLocaleDateString());case 14:return r=e.sent,t({type:"SET_OCCUPATIONS",occupations:r}),e.abrupt("return",a);case 19:throw e.prev=19,e.t0=e.catch(0),console.log("err in updateMeeting",e.t0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}())),M()}catch(c){k("Can not save. Please try again")}else k("Please choose start and end dates.")},children:[Object(a.jsxs)("label",{children:["Manager:",Object(a.jsx)("br",{}),Object(a.jsx)("select",{name:"createdBy",onInput:T,value:JSON.stringify(l.createdBy),children:c.map((function(e){return Object(a.jsx)("option",{value:JSON.stringify(e),children:e.fullname},S.makeId())}))})]}),Object(a.jsxs)("label",{children:["Start:",Object(a.jsx)("br",{}),Object(a.jsx)(A.a,{selected:new Date(l.startDate),peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,showTimeSelect:!0,timeIntervals:60,filterTime:function(e){var t=e.getHours(),n=new Date;return!(n.toLocaleDateString()===e.toLocaleDateString()&&t<n.getHours())&&(E(t,1)&&N(e,t))},dateFormat:"MMMM d, yyyy h aa",scrollableYearDropdown:!0,onChange:function(e){return _(e,"startDate")}})]}),Object(a.jsxs)("label",{children:["End:",Object(a.jsx)("br",{}),Object(a.jsx)(A.a,{selected:new Date(l.endDate||l.startDate),includeDates:[new Date(l.startDate)],showTimeSelect:!0,timeIntervals:60,filterTime:function(e){var t=e.getHours();return!(t<=l.startDate.getHours())&&(E(t)&&N(e,t,1))},dateFormat:"h aa",dropdownMode:"select",onChange:function(e){return _(e,"endDate")}})]}),Object(a.jsxs)("label",{children:["Description:",Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{name:"desc",onChange:T,value:l.desc,placeholder:"Enter Meeting Description"})]}),Object(a.jsxs)("div",{className:"buttons flex space-bt",children:[Object(a.jsx)("button",{type:"button",className:"cancel nice-btn ".concat(l._id?"":"hidden"),onClick:M,children:"Cancel"}),Object(a.jsx)("button",{className:"nice-btn",type:"submit",children:"Save Meeting"})]})]})]}):Object(a.jsx)("h1",{children:"Loading"})}function Y(e){var t=e.meeting,n=new Date(t.startDate).toLocaleString().split(", "),r=Object(j.a)(n,2),c=r[0],s=r[1].split(".")[0],o=new Date(t.endDate).toLocaleString().split(", ")[1];return Object(a.jsxs)("div",{className:"meeting-preview flex align-center",children:[Object(a.jsx)("span",{className:"name",children:t.createdBy.fullname}),Object(a.jsx)("span",{className:"date",children:c}),Object(a.jsxs)("span",{className:"time",children:[s," - ",o]}),Object(a.jsx)("p",{className:"desc",children:t.desc||"(No description)"})]})}function J(){var e=Object(s.c)((function(e){return e.meetingModule})).meetings,t=Object(o.useState)([]),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(o.useState)(null),u=Object(j.a)(i,2),l=u[0],p=u[1],d=Object(s.b)();Object(o.useEffect)((function(){p(new Date)}),[]),Object(o.useEffect)((function(){var e=new Date;d(L(e))}),[d]),Object(o.useEffect)((function(){l&&h()}),[l,e]);var g=function(e){l.getMonth()!==e.getMonth()&&d(L(new Date(e))),p(e)},h=function(){var t=null===e||void 0===e?void 0:e.filter((function(e){return new Date(e.startDate).getDate()===l.getDate()}));c(t.sort((function(e,t){return new Date(e.startDate).getHours()-new Date(t.startDate).getHours()})))};return Object(a.jsxs)("main",{className:"meeting-list flex col",children:[Object(a.jsx)("h1",{children:"meetings"}),Object(a.jsx)(A.a,{selected:l,peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,yearDropdownItemNumber:20,timeIntervals:60,dateFormat:"MMMM d, yyyy",scrollableYearDropdown:!0,dropdownMode:"select",onChange:function(e){return g(e)}}),Object(a.jsxs)("div",{className:"title flex align-center",children:[Object(a.jsx)("h3",{className:"name",children:"Manager"}),Object(a.jsx)("h3",{className:"date",children:"Date"}),Object(a.jsx)("h3",{className:"time",children:"Time"}),Object(a.jsx)("h3",{className:"desc",children:"Description"})]}),(null===r||void 0===r?void 0:r.length)?Object(a.jsx)("section",{className:"meetings-container",children:r.map((function(e){return Object(a.jsx)("div",{onClick:function(){return d((t=e._id,function(){var e=Object(f.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getMeetingById(t);case 3:return a=e.sent,n({type:"SET_MEETING_TO_EDIT",meetingToEdit:a}),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getMeetingById",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var t},children:Object(a.jsx)(Y,{meeting:e})},S.makeId())}))}):Object(a.jsxs)("h2",{children:["(No Meetings On ",null===l||void 0===l?void 0:l.toDateString(),")"]})]})}function q(){var e=Object(s.c)((function(e){return e.meetingModule})).occupationsByDate,t=Object(o.useState)(!1),n=Object(j.a)(t,2),r=n[0],c=n[1];Object(o.useEffect)((function(){var e,t=(new Date).getHours(),n=setInterval((function(){(new Date).getHours()!==t&&(e=setInterval(i,36e5),clearInterval(n))}),6e4);return function(){clearInterval(n),clearInterval(e)}}),[]),Object(o.useEffect)((function(){i()}),[e]);var i=function(){var t,n=new Date,a="".concat(n.getMonth(),"-").concat(n.getDate());(null===(t=e[a])||void 0===t?void 0:t.includes(n.getHours()))?c(!0):r&&c(!1)};return Object(a.jsxs)("section",{className:"room-details",children:[Object(a.jsxs)("h1",{className:"room-occupation",children:["Room 1 is ",r?"currently occupied \ud83d\udd34":"available \ud83d\udfe2"]}),Object(a.jsx)(J,{}),Object(a.jsx)(U,{})]})}function W(){var e=Object(s.b)();return Object(o.useEffect)((function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.query();case 3:return n=e.sent,t({type:"SET_MANAGERS",managers:n}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log("err in getManagers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e(R(new Date))}),[e]),Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(i.a,{children:[Object(a.jsx)(l,{}),Object(a.jsx)("main",{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/manager",component:_}),Object(a.jsx)(u.b,{path:"/room",component:q}),Object(a.jsx)(u.a,{from:"/",to:"/room"})]})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(145);var X=n(21),z=n(69),V=n(42),K={managers:[]};var Q={meetings:[],meetingToEdit:null,occupationsByDate:{}};var Z=Object(X.c)({meetingModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_MEETING_TO_EDIT":return Object(p.a)(Object(p.a)({},e),{},{meetingToEdit:t.meetingToEdit});case"SET_MEETINGS":return Object(p.a)(Object(p.a)({},e),{},{meetings:t.meetings});case"ADD_MEETING":return Object(p.a)(Object(p.a)({},e),{},{meetings:[].concat(Object(V.a)(e.meetings),[t.meeting])});case"UPDATE_MEETING":var n=e.meetings.map((function(e){return e._id===t.meeting._id?t.meeting:e}));return Object(p.a)(Object(p.a)({},e),{},{meetings:n});case"SET_OCCUPATIONS":return Object(p.a)(Object(p.a)({},e),{},{occupationsByDate:t.occupations});default:return e}},managerModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_MANAGERS":return Object(p.a)(Object(p.a)({},e),{},{managers:t.managers});case"ADD_MANAGER":return Object(p.a)(Object(p.a)({},e),{},{managers:[].concat(Object(V.a)(e.managers),[t.manager])});case"UPDATE_MANAGER":var n=e.managers.map((function(e){return e._id===t.manager._id?t.manager:e}));return Object(p.a)(Object(p.a)({},e),{},{managers:n});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.d,ee=Object(X.e)(Z,$(Object(X.a)(z.a))),te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,154)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};c.a.render(Object(a.jsx)(s.a,{store:ee,children:Object(a.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),te()}},[[147,1,2]]]);
//# sourceMappingURL=main.ca8d92f0.chunk.js.map